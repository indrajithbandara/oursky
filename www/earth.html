<!DOCTYPE html>
<html lang="en">
<head>
  <title>Oursky on Earth</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,user-scalable=0,minimal-ui">
  <script src="lib/cesium/Cesium.js"></script>
  <style>
    @import url(lib/cesium/Widgets/widgets.css);
    #cesiumContainer {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      margin: 0;
      overflow: hidden;
      padding: 0;
      font-family: sans-serif;
    }
    html {
      height: 100%;
    }
    body {
      padding: 0;
      margin: 0;
      overflow: hidden;
      height: 100%;
    }
  </style>
</head>
<body>
<div id="cesiumContainer"></div>
<script>
var OURSKY=typeof OURSKY==="undefined"?{}:OURSKY;

(function(){

OURSKY.option = {
  sircleHeight : 250000,
  sircleSize   : 200000,
  colorData    : [
    [0.105882353,0.215686275,0.678431373, 0.9],
    [0.470588235,0.57254902,1, 0.9],
    [0.0, 0.0, 0.9, 0.9],
    [0.447058824,0.807843137,0.960784314, 0.9]
  ],
  initSkyData  : [
    {
      name   : "Boston",
      latlon : [-71.058880, 42.360083],
      color  : [0.105882353,0.215686275,0.678431373, 0.9],
    },
    {
      name   : "San Francisco",
      latlon : [-122.419416, 37.774930],
      color  : [0.470588235,0.57254902,1, 0.9]
    },
    {
      name   : "Chicago",
      latlon : [-87.629798, 41.878114],
      color  : [0.0, 0.0, 0.9, 0.9]
    },
    {
      name   : "Brazil",
      latlon : [-51.925280, -14.235004],
      color  : [0.447058824,0.807843137,0.960784314, 0.9]
    },
    {
      name   : "Tokyo",
      latlon : [139.731992, 35.709026],
      color  : [0.105882353,0.215686275,0.678431373, 0.9]
    },
    {
      name   : "Hokkaido",
      latlon : [143.006695, 43.997712],
      color  : [0.470588235,0.57254902,1, 0.9]
    },
    {
      name   : "Okinawa",
      latlon : [127.680932, 26.212401],
      color  : [0.0, 0.0, 0.9, 0.9]
    },
  ]
}
OURSKY.init = function(){
  OURSKY.viewer = new Cesium.Viewer('cesiumContainer',{
    animation : false,
    timeline : false,
    fullscreenButton : false,
    navigationHelpButton : false
  });
  // var viewer = new Cesium.CesiumWidget('cesiumContainer');

  // change layers
  var layers = OURSKY.viewer.scene.imageryLayers;
  var blackMarble = layers.addImageryProvider(new Cesium.TileMapServiceImageryProvider({
    url : '//cesiumjs.org/blackmarble',
    maximumLevel : 8,
    credit : 'Black Marble imagery courtesy NASA Earth Observatory'
  }));
  blackMarble.alpha = 0.8;
  blackMarble.brightness = 0.8;

  for (var i = 0; i < OURSKY.option.initSkyData.length; i++) {
    OURSKY.addCircle({
      name   : OURSKY.option.initSkyData[i].name,
      latlon : OURSKY.option.initSkyData[i].latlon,
      color  : OURSKY.option.initSkyData[i].color
    });
  };

  var scene = OURSKY.viewer.scene;

  // function flyToTokyo() {
  //     var longitude = 139.054784;
  //     var latitude = 35.685692;
  //     var height = 300000.0;
  //     scene.camera.flyTo({
  //         destination : Cesium.Cartesian3.fromDegrees(longitude, latitude, height)
  //     });
  // }
  // flyToTokyo();

  // for random generate
  var I = 0;
  var circleTimer = setInterval(function(){
      var lat = (Math.random() * 358)-179
      var lon = (Math.random() * 166)-83
      var cr = Math.floor( Math.random() * OURSKY.option.colorData.length )
      OURSKY.addCircle({
          name   : "My Sky " + I,
          latlon : [lat, lon],
          color  : OURSKY.option.colorData[cr]
      });
  },1000);


}
OURSKY.addCircle = function(data){
  var entity = OURSKY.viewer.entities.add({
    position: Cesium.Cartesian3.fromDegrees(data.latlon[0],data.latlon[1]),
    name : data.name,
    ellipse : {
      height : OURSKY.option.sircleHeight,
      semiMinorAxis : OURSKY.option.sircleSize,
      semiMajorAxis : OURSKY.option.sircleSize,
      material : new Cesium.Color(data.color[0],data.color[1],data.color[2],data.color[3])
    }
  });
  // OURSKY.viewer.zoomTo(OURSKY.viewer.entities);
}

OURSKY.dummyAddCircle = function(){

}

OURSKY.init();

})();
</script>
</body>
</html>

<!-- <ons-page ng-controller="EarthController">
    <div id="earth_div"></div>
</ons-page> -->